<html>
    <head>
        <meta charset='utf-8'>
        <script>
		var jogadorX = {
			simbolo: 'X'
		}
		var jogadorO = {
			simbolo: 'O'
		}
		var VAZIO = {
        	simbolo : "_"
        };

        var tabuleiro = [
        	[VAZIO,VAZIO,VAZIO],
        	[VAZIO,VAZIO,VAZIO],
        	[VAZIO,VAZIO,VAZIO]
        ];

    	var pontuacaoXLinha = 0;
		var pontuacaoXColuna = 0;
		var pontuacaoXDiagonal = 0;


		var pontuacaoOLinha = 0;
		var pontuacaoOColuna = 0;
		var pontuacaoODiagonal = 0;
		
		var vencedorX = false;
		var vencedorO = false;


		var jogadorAtual = jogadorX;

		var fazerJogada = function(linha,coluna){
			if(tabuleiro[linha][coluna]===VAZIO){

				tabuleiro[linha][coluna] = jogadorAtual;
				desenharTabuleiro();
				verificarVencedor();
				proximoJogador();

			}else{
				alert("Jogada Inv√°lida")
			}
		}

		var proximoJogador = function(){

			if(jogadorAtual ===jogadorX){
					jogadorAtual = jogadorO;
				}else{
					jogadorAtual = jogadorX;
				}
		}

		var verificarVencedor = function(){

			

				verificarSomaDiagonalPrincipal();

				if(vencedorX===false && vencedorO===false){
					verificarSomaDiagonalSecundaria();
				}

				if(vencedorX===false && vencedorO===false){
					verificarSomaColuna();
	        	}

				if(vencedorX===false && vencedorO===false){
	        		verificarSomaLinha();
        		}

        		if(vencedorX){
					alert('Jogador X venceu o jogo');				
					

        		}else if(vencedorO){
        			alert('Jogador O venceu o jogo');
        			
        			
        		}
			
		}

		var verificarSomaLinha = function(){

	   		for (var linha=0; linha<3;linha++){
    			for(var coluna=0; coluna<3;coluna++){
    					
    				if(tabuleiro[coluna][linha].simbolo==='X'){
    					pontuacaoXLinha++;
        				 
					}else if(tabuleiro[coluna][linha].simbolo==='O'){
						pontuacaoOLinha++
					}
    			

				}
    			if(pontuacaoXLinha===3){
					vencedorX = true;
					break;
				}else if(pontuacaoOLinha===3){
					vencedorO = true;
					break;
				}					

				pontuacaoXLinha=0;
				pontuacaoOLinha = 0;

        	}  
		}

		var verificarSomaColuna = function(){

			for (var linha=0; linha<3;linha++){
    			for(var coluna=0; coluna<3;coluna++){
    					
    				if(tabuleiro[linha][coluna].simbolo==='X'){
    					pontuacaoXColuna++;
        				 
					}else if(tabuleiro[linha][coluna].simbolo==='O'){
						pontuacaoOColuna++
					}        			
				}

				if(pontuacaoXColuna===3){
					vencedorX = true;
					break;
				}else if(pontuacaoOColuna===3){
					vencedorO = true;
					break;
				}

				pontuacaoXColuna=0;
				pontuacaoOColuna = 0;

    		}

		}


		var verificarSomaDiagonalPrincipal = function(){
			
			for (var linha=0; linha<3;linha++){        		    

					if(tabuleiro[linha][linha].simbolo==='X'){
						pontuacaoXDiagonal++						
					}else if(tabuleiro[linha][linha].simbolo==='O'){
						pontuacaoODiagonal++
					}				

					if(pontuacaoXDiagonal===3){

						vencedorX = true;
						break;
					}else if(pontuacaoODiagonal===3){
							vencedorO = true;
						break;
					}
				}

		}



		var verificarSomaDiagonalSecundaria = function(){
			var coluna = 2; 
			pontuacaoXDiagonal = 0;
			pontuacaoODiagonal=0;

			for (var linha=0; linha<3;linha++){        			    

				if(tabuleiro[linha][coluna].simbolo==='X'){
					pontuacaoXDiagonal++						
				}else if(tabuleiro[linha][coluna].simbolo==='O'){
					pontuacaoODiagonal++
				}				

				if(pontuacaoXDiagonal===3){
					vencedorX = true;
					break;
				}else if(pontuacaoODiagonal===3){
					vencedorO = true;
					break;
				}

				coluna--;
			}



		}

		

		var mostrarGanhador = function(ganhador){
			alert(ganhador);

		}

		var criarBotaoTabuleiro = function(linha, coluna){

			var button = document.createElement("button");
        	button.textContent= tabuleiro[linha][coluna].simbolo;
        	button.onclick = function(){
				fazerJogada(linha,coluna);
        	}
        	document.body.appendChild(button);

		}


		var limparTela = function(){
			document.body.innerHTML="";
		}

		var desenharTabuleiro = function(){
			limparTela();
        	for (var linha=0; linha<3;linha++){
        		for(var coluna=0; coluna<3;coluna++){
        			
					criarBotaoTabuleiro(linha,coluna);
        		}
        		
        		novaLinha();
        	}

        }
        
        var novaLinha = function(){

        	var br = document.createElement("br");
        	document.body.appendChild(br);
        }
        </script>
        <TITLE>Jogo da Velha</TITLE>
    </head>
    <body onload="desenharTabuleiro()">

    

    </body>
</html>